<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>For Kelly</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
:root { --safe-pad: 14px; }

/* One screen, no scroll */
html, body {
height: 100%;
margin: 0;
overflow: hidden;
background: #fafafa;
color: #222;
font-family: -apple-system, BlinkMacSystemFont, sans-serif;
}

/* Center content within viewport */
.wrap {
height: 100%;
display: flex;
align-items: center;
justify-content: center;
padding: var(--safe-pad);
box-sizing: border-box;
}

.card {
width: min(720px, 100%);
text-align: center;
}

h1 {
font-weight: 500;
margin: 0 0 6px;
font-size: clamp(22px, 4.5vw, 30px);
}

.sub {
margin: 0 0 10px;
color: #666;
font-size: clamp(12px, 3.2vw, 14px);
}

/* Image: half-ish, but responsive */
img.hero {
width: min(52vw, 260px);
max-width: 260px;
min-width: 160px;
border-radius: 12px;
display: block;
margin: 10px auto 10px;
}

.question {
margin: 8px auto 8px;
font-size: clamp(14px, 3.9vw, 18px);
max-width: 42ch;
}

/* Button stage stays inside screen */
.btn-stage {
position: relative;
width: min(520px, 100%);
height: 96px; /* fixed height so page never grows */
margin: 10px auto 0;
}

button {
border: 0;
padding: 12px 16px;
border-radius: 999px;
font-size: clamp(14px, 3.8vw, 16px);
cursor: pointer;
box-shadow: 0 6px 18px rgba(0,0,0,0.08);
user-select: none;
-webkit-tap-highlight-color: transparent;
touch-action: manipulation;
white-space: nowrap;
}
button:active { transform: scale(0.98); }

/* Place the YES slightly lower */
#yesBtn {
background: #111;
color: #fff;
position: absolute;
left: 50%;
top: 58%; /* <-- slightly lower on screen */
transform: translate(-50%, -50%);
z-index: 2;
}

/* NO starts above/right a bit */
#noBtn {
background: #fff;
color: #111;
border: 1px solid #ddd;
position: absolute;
left: 68%;
top: 30%;
transform: translate(-50%, -50%);
z-index: 3;
transition: left 0.10s linear, top 0.10s linear;
}

/* Reveal message (same screen, no push) */
#reveal {
margin-top: 14px;
opacity: 0;
transform: translateY(6px);
transition: opacity 1.1s ease, transform 1.1s ease;
font-size: clamp(14px, 4vw, 18px);
}
#reveal.show {
opacity: 1;
transform: translateY(0);
}

.footer {
margin-top: 12px;
color: #666;
font-size: clamp(12px, 3.2vw, 14px);
}

/* Keep everything within one screen even on very small phones */
@media (max-height: 700px) {
img.hero { width: min(46vw, 230px); }
.btn-stage { height: 88px; }
}
@media (max-height: 620px) {
img.hero { width: min(42vw, 200px); margin: 8px auto; }
.btn-stage { height: 82px; }
.question { margin: 6px auto; }
}
</style>
</head>

<body>
<div class="wrap">
<div class="card">
<h1>For Kelly</h1>
<p class="sub">February ¬∑ Tokyo</p>

<img class="hero" src="images/photo1.jpg" alt="Us" />

<div class="question">
would you like to accept the invitation from Han to travel the world this year ?
</div>

<div class="btn-stage" id="stage">
<button id="yesBtn">Hell Yes ‚ù§Ô∏è</button>
<button id="noBtn">Hell No üö´</button>
</div>

<div id="reveal">Can‚Äôt wait to see the world with youüåéüåçüåè</div>
<div class="footer">‚Äî Han</div>
</div>
</div>

<script>
const stage = document.getElementById("stage");
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const reveal = document.getElementById("reveal");

let orbiting = false;
let theta = 0;
let orbitTimer = null;

function clamp(v, min, max) { return Math.max(min, Math.min(max, v)); }

function setNoPosition(leftPx, topPx) {
const s = stage.getBoundingClientRect();
const b = noBtn.getBoundingClientRect();

// Keep button fully inside the stage (phone safe)
const minL = 0 + 2;
const maxL = s.width - b.width - 2;
const minT = 0 + 2;
const maxT = s.height - b.height - 2;

const L = clamp(leftPx, minL, maxL);
const T = clamp(topPx, minT, maxT);

noBtn.style.left = L + "px";
noBtn.style.top = T + "px";
// Remove translate centering since we now set exact top/left
noBtn.style.transform = "translate(0, 0)";
}

function centerOf(el) {
const s = stage.getBoundingClientRect();
const r = el.getBoundingClientRect();
return {
x: (r.left - s.left) + r.width / 2,
y: (r.top - s.top) + r.height / 2
};
}

function startOrbit() {
orbiting = true;

// Ensure NO uses absolute pixel positioning inside the stage
// Convert from % position to px based on current rects
const s = stage.getBoundingClientRect();
const b = noBtn.getBoundingClientRect();
// If it still has % left/top, get computed px relative to stage
// We set a sane starting point near the yes button
const yesC = centerOf(yesBtn);

// Orbit radius: adapt to stage size; never too big
const maxR = Math.min(s.width, s.height) * 0.35;
const r = clamp(maxR, 22, 60); // sweet spot for phones

// Orbital speed: one loop about every ~1.6s
const step = (Math.PI * 2) / 32;

// Place NO initially on the orbit
theta = 0;

// Fix positioning model: top/left are px within stage
noBtn.style.position = "absolute";
noBtn.style.transition = "left 0.08s linear, top 0.08s linear";

orbitTimer = setInterval(() => {
const c = centerOf(yesBtn);
theta += step;

const targetCenterX = c.x + r * Math.cos(theta);
const targetCenterY = c.y + r * Math.sin(theta);

// Convert target center to top-left for NO button
const sRect = stage.getBoundingClientRect();
const nRect = noBtn.getBoundingClientRect();

const targetLeft = targetCenterX - nRect.width / 2;
const targetTop = targetCenterY - nRect.height / 2;

setNoPosition(targetLeft, targetTop);
}, 50);
}

function stopOrbit() {
orbiting = false;
if (orbitTimer) clearInterval(orbitTimer);
orbitTimer = null;
}

// YES click: hide buttons, reveal message (no scroll)
yesBtn.addEventListener("click", () => {
stopOrbit();
stage.style.display = "none";
setTimeout(() => reveal.classList.add("show"), 120);
});

// NO click: start orbiting around YES, stays inside screen
// Also make it immediately jump a bit so it feels "alive"
function jumpNearYes() {
const s = stage.getBoundingClientRect();
const y = centerOf(yesBtn);
const n = noBtn.getBoundingClientRect();

// random small offset around yes
const dx = (Math.random() < 0.5 ? -1 : 1) * (18 + Math.random() * 20);
const dy = (Math.random() < 0.5 ? -1 : 1) * (10 + Math.random() * 14);

setNoPosition(y.x + dx - n.width / 2, y.y + dy - n.height / 2);
}

noBtn.addEventListener("click", (e) => {
e.preventDefault();

// If not orbiting yet, start the dance-around-YES behavior
if (!orbiting) {
// convert NO positioning to px inside stage first
noBtn.style.transform = "translate(0, 0)";
jumpNearYes();
startOrbit();
} else {
// already orbiting: make it "dodge" within stage
jumpNearYes();
}
});

// On touch devices, start orbit on touchstart too (makes it harder to tap)
noBtn.addEventListener("touchstart", () => {
if (!orbiting) {
noBtn.style.transform = "translate(0, 0)";
jumpNearYes();
startOrbit();
} else {
jumpNearYes();
}
}, { passive: true });

// If orientation changes, keep NO inside stage bounds
window.addEventListener("resize", () => {
if (orbiting) {
// force a safe reposition on resize
jumpNearYes();
}
});
</script>
</body>
</html>
